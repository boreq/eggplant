(function(t){function e(e){for(var a,o,s=e[0],c=e[1],u=e[2],d=0,v=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&v.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(v.length)v.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},"00a8":function(t,e,n){"use strict";n("7bee")},"027e":function(t,e,n){},"0461":function(t,e,n){},"0499":function(t,e,n){"use strict";n("eee0")},"15f8":function(t,e,n){"use strict";n("cf8f")},"18c9":function(t,e,n){},"1d00":function(t,e,n){},"1d808":function(t,e,n){"use strict";n("487c")},"1f42":function(t,e,n){"use strict";n("e7df")},"1fa5":function(t,e,n){},2099:function(t,e,n){"use strict";n("c33d")},2206:function(t,e,n){"use strict";n("bbb6")},2559:function(t,e,n){},"25db":function(t,e,n){},2885:function(t,e,n){"use strict";n("f567")},"2cd4":function(t,e,n){"use strict";n("c6e9")},"2e48":function(t,e,n){"use strict";n("d25b")},"35d1":function(t,e,n){"use strict";n("2559")},"3e4c":function(t,e,n){"use strict";n("0461")},"487b":function(t,e,n){"use strict";n("5e2e9")},"487c":function(t,e,n){},4890:function(t,e,n){"use strict";n("ec2d")},"518d":function(t,e,n){},"5dad":function(t,e,n){},"5e2e9":function(t,e,n){},"5f7a":function(t,e,n){"use strict";n("e1ad")},6626:function(t,e,n){"use strict";n("25db")},"68b4":function(t,e,n){"use strict";n("9605")},7181:function(t,e,n){},"7bee":function(t,e,n){},"7cf3":function(t,e,n){"use strict";n("e7d8")},"7fbd":function(t,e,n){"use strict";n("027e")},"8d14":function(t,e,n){},9605:function(t,e,n){},"9bcb":function(t,e,n){},"9d14":function(t,e,n){"use strict";n("eaaa")},a272:function(t,e,n){"use strict";n("aea5")},a412:function(t,e,n){},aacf:function(t,e,n){"use strict";n("8d14")},aea5:function(t,e,n){},b5ae:function(t,e,n){"use strict";n("a412")},b6e4:function(t,e,n){"use strict";n("9bcb")},bbb6:function(t,e,n){},c23f:function(t,e,n){"use strict";n("d3ee")},c33d:function(t,e,n){},c6e9:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a,i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{csd:t.isCsd},attrs:{id:"app"}},[n("div",{staticClass:"content"},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"container"},[n("router-view")],1)])]),n("div",{staticClass:"now-playing"},[n("now-playing")],1),n("div",{staticClass:"controls"},[n("controls",{attrs:{playbackData:t.playbackData}})],1),n("player",{on:{"playback-data":function(e){return t.onPlaybackData(e)}}}),n("notifications",{staticClass:"notifications"}),n("conversion-status",{staticClass:"conversion-status"}),n("media-session")],1)},o=[],s=n("d4ec"),c=n("bee2"),u=n("257e"),l=n("262e"),d=n("2caf"),v=n("ade3"),b=(n("99af"),n("9ab4")),f=n("60a3"),h=(n("d3b7"),n("ddb0"),n("a434"),n("2f62")),p=n("bfa9");i["a"].use(h["a"]);var m,y=new p["a"]({storage:window.localStorage,reducer:function(t){return{volume:t.volume,muted:t.muted,shuffle:t.shuffle}}});(function(t){t["Replace"]="replace",t["Append"]="append",t["Remove"]="remove",t["Play"]="play",t["Pause"]="pause",t["Previous"]="previous",t["Next"]="next",t["SetVolume"]="setVolume",t["Mute"]="mute",t["Unmute"]="unmute",t["Shuffle"]="shuffle",t["NoShuffle"]="noShuffle",t["SetUser"]="setUser"})(m||(m={}));var O=new h["a"].Store({state:{entries:[],playingIndex:null,paused:!0,volume:.5,muted:!1,shuffle:!1,user:void 0},mutations:(a={},Object(v["a"])(a,m.Replace,(function(t,e){t.entries=e.entries,e.playingIndex<0?t.playingIndex=0:e.playingIndex>e.entries.length-1?t.playingIndex=e.entries.length-1:t.playingIndex=e.playingIndex})),Object(v["a"])(a,m.Append,(function(t,e){t.entries=t.entries.concat(e.entries),void 0!==t.playingIndex&&null!==t.playingIndex||(t.playingIndex=0)})),Object(v["a"])(a,m.Remove,(function(t,e){var n=t.entries.indexOf(e.entry);n>=0&&t.entries.splice(n,1),t.entries.length>0?t.playingIndex>t.entries.length-1&&(t.playingIndex=t.entries.length-1):t.playingIndex=void 0})),Object(v["a"])(a,m.Play,(function(t){j(t.entries)||(t.paused=!1)})),Object(v["a"])(a,m.Pause,(function(t){t.paused=!0})),Object(v["a"])(a,m.Previous,(function(t){if(!j(t.entries))if(t.shuffle&&t.entries.length>1){var e=t.playingIndex;while(t.playingIndex===e)t.playingIndex=g(0,t.entries.length)}else t.playingIndex-=1,t.playingIndex<0&&(t.playingIndex=t.entries.length-1)})),Object(v["a"])(a,m.Next,(function(t){if(!j(t.entries))if(t.shuffle&&t.entries.length>1){var e=t.playingIndex;while(t.playingIndex===e)t.playingIndex=g(0,t.entries.length)}else t.playingIndex+=1,t.playingIndex>t.entries.length-1&&(t.playingIndex=0)})),Object(v["a"])(a,m.SetVolume,(function(t,e){t.volume=e.volume,t.volume<0&&(t.volume=0),t.volume>1&&(t.volume=1),t.muted=0===t.volume})),Object(v["a"])(a,m.Mute,(function(t){t.muted=!0})),Object(v["a"])(a,m.Unmute,(function(t){t.muted=!1})),Object(v["a"])(a,m.Shuffle,(function(t){t.shuffle=!0})),Object(v["a"])(a,m.NoShuffle,(function(t){t.shuffle=!1})),Object(v["a"])(a,m.SetUser,(function(t,e){t.user=e})),a),getters:{nowPlaying:function(t){return j(t.entries)?null:t.entries[t.playingIndex]},volume:function(t){return t.muted?0:t.volume}},plugins:[y.plugin]});function j(t){return!t||0===t.length}function g(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t}n("a15b");var k,w,C,_=n("bc3a"),x=n.n(_),P=n("a78e"),$=n.n(P),S="auth-token",T=function(){function t(){Object(s["a"])(this,t)}return Object(c["a"])(t,[{key:"storeToken",value:function(t){$.a.set(S,t)}},{key:"clearToken",value:function(){$.a.remove(S)}},{key:"getToken",value:function(){return $.a.get(S)}}]),t}(),I="Access-Token",E=function(){function t(e){var n=this;Object(s["a"])(this,t),Object(v["a"])(this,"vue",void 0),Object(v["a"])(this,"axios",x.a.create()),Object(v["a"])(this,"authService",new T),this.vue=e,this.axios.interceptors.request.use((function(t){var e=n.authService.getToken();return e&&(t.headers[I]=e),t}),(function(t){return Promise.reject(t)})),this.axios.interceptors.response.use((function(t){return t}),(function(t){return t.response&&401===t.response.status&&(n.authService.clearToken(),n.vue.$store.commit(m.SetUser,null)),Promise.reject(t)}))}return Object(c["a"])(t,[{key:"browse",value:function(t){var e=t.join("/"),n="browse/".concat(e);return this.axios.get("/api/"+n)}},{key:"stats",value:function(){var t="stats";return this.axios.get("/api/"+t)}},{key:"trackUrl",value:function(t){var e="track/".concat(t.fileId);return"/api/"+e}},{key:"thumbnailUrl",value:function(t){var e="thumbnail/".concat(t.thumbnail.fileId);return"/api/"+e}},{key:"initialize",value:function(t){var e="auth/register-initial";return this.axios.post("/api/"+e,t)}},{key:"login",value:function(t){var e=this,n="auth/login";return new Promise((function(a,i){e.axios.post("/api/"+n,t).then((function(t){e.authService.storeToken(t.data.token),e.refreshCurrentUser().then((function(){a()}),(function(t){i(t)}))}),(function(t){i(t)}))}))}},{key:"logout",value:function(){var t=this,e="auth/logout";return new Promise((function(n,a){t.axios.post("/api/"+e).then((function(){t.authService.clearToken(),t.vue.$store.commit(m.SetUser,null),n()}),(function(t){a(t)}))}))}},{key:"refreshCurrentUser",value:function(){var t=this,e="auth";return new Promise((function(n,a){t.axios.get("/api/"+e).then((function(e){t.vue.$store.commit(m.SetUser,e.data),n(e.data)}),(function(t){t.response&&401===t.response.status?n(null):a(t)}))}))}},{key:"register",value:function(t){var e="auth/register";return this.axios.post("/api/"+e,t)}},{key:"list",value:function(){var t="auth/users";return this.axios.get("/api/"+t)}},{key:"createInvitation",value:function(){var t="auth/create-invitation";return this.axios.post("/api/"+t)}},{key:"remove",value:function(t){t=encodeURIComponent(t);var e="auth/users/".concat(t,"/remove");return this.axios.post("/api/"+e)}}]),t}(),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"controls"},[n("div",{staticClass:"core"},[n("div",{staticClass:"shuffle"},[n("indicator",{attrs:{state:t.shuffle}},[n("a",{on:{click:function(e){return t.onShuffle()}}},[n("i",{staticClass:"fas fa-random"})])])],1),n("div",{staticClass:"previous"},[n("a",{on:{click:function(e){return t.onPrevious()}}},[n("i",{staticClass:"fas fa-backward"})])]),n("div",{staticClass:"play"},[n("a",{on:{click:function(e){return t.onPlayPause()}}},[n("indicator",{attrs:{state:!t.paused,width:15}},[t._v(" Play ")])],1)]),n("div",{staticClass:"next"},[n("a",{on:{click:function(e){return t.onNext()}}},[n("i",{staticClass:"fas fa-forward"})])]),n("div",{staticClass:"volume"},[n("Volume")],1)]),n("div",{staticClass:"progress"},[n("div",{staticClass:"current"},[t._v(" "+t._s(t.currentTime)+" ")]),n("div",{staticClass:"bar"},[n("progress-bar",{attrs:{value:t.currentTimePercentage},on:{"value-selected":t.seek}})],1),n("div",{staticClass:"duration"},[t._v(" "+t._s(t.duration)+" ")])])])},A=[],N=(n("25f0"),function(){function t(){Object(s["a"])(this,t)}return Object(c["a"])(t,[{key:"formatTime",value:function(t){var e=Math.floor(t/3600),n=Math.floor(t%3600/60),a=Math.floor(t%60);return e?"".concat(e,":").concat(this.pad(n,2),":").concat(this.pad(a,2)):"".concat(n,":").concat(this.pad(a,2))}},{key:"pad",value:function(t,e){var n=t.toString();while(n.length<e)n="0"+n;return n}}]),t}()),U=(n("4de4"),w=k=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"notifications",[]),Object(v["a"])(Object(u["a"])(t),"intervalID",void 0),t}return Object(c["a"])(n,[{key:"mounted",value:function(){var t=this;this.$root.$on(C.notificationEvent,(function(e){t.notifications.splice(0,0,e)})),this.intervalID=window.setInterval(this.processErrors,100)}},{key:"destroyed",value:function(){window.clearInterval(this.intervalID)}},{key:"shouldHide",value:function(t){var e=this.duration(new Date,t.created);return e>C.visibilityDuration}},{key:"processErrors",value:function(){var t=this;this.notifications=this.notifications.filter((function(e){var n=t.duration(new Date,e.created);return n<C.visibilityDuration+C.animationDuration}))}},{key:"duration",value:function(t,e){return(t.getTime()-e.getTime())/1e3}}],[{key:"pushError",value:function(t,e,n){var a=n&&n.response&&n.response.data&&n.response.data.message?n.response.data.message:null,i={id:this.notificationId++,class:"error",created:new Date,text:e,extra:a};t.$root.$emit(this.notificationEvent,i)}},{key:"pushSuccess",value:function(t,e){var n={id:this.notificationId++,class:"success",created:new Date,text:e,extra:null};t.$root.$emit(this.notificationEvent,n)}}]),n}(f["d"]),Object(v["a"])(k,"notificationEvent","eggplant_notification"),Object(v["a"])(k,"notificationId",0),Object(v["a"])(k,"visibilityDuration",10),Object(v["a"])(k,"animationDuration",2),C=w);U=C=Object(b["a"])([f["a"]],U);var M=U,B="seek",V=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"intervalID",void 0),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),Object(v["a"])(Object(u["a"])(t),"currentNowPlaying",null),t}return Object(c["a"])(n,[{key:"nowPlaying",get:function(){return this.$store.getters.nowPlaying}},{key:"paused",get:function(){return this.$store.state.paused}},{key:"nowPlayingUrl",get:function(){var t=this.nowPlaying;return t?this.apiService.trackUrl(t.track):null}},{key:"audio",get:function(){return this.$refs.audio}},{key:"volume",get:function(){return this.$store.getters.volume}},{key:"onNowPlayingChanged",value:function(){if(!this.nowPlaying)return this.currentNowPlaying=null,void this.pause();this.currentNowPlaying&&this.currentNowPlaying===this.nowPlaying||(this.currentNowPlaying=this.nowPlaying,this.audio.src=this.nowPlayingUrl,this.play())}},{key:"onPausedChanged",value:function(t){t?this.audio.pause():this.audio.play()}},{key:"onVolumeChanged",value:function(t){this.audio.volume=t}},{key:"created",value:function(){this.intervalID=window.setInterval(this.emitValues,100)}},{key:"mounted",value:function(){var t=this;this.audio.volume=this.volume,this.$root.$on(B,(function(e){t.nowPlaying&&(t.audio.currentTime=t.audio.duration*e)}))}},{key:"destroyed",value:function(){window.clearInterval(this.intervalID)}},{key:"onEnded",value:function(){this.currentNowPlaying=null,this.$store.commit(m.Next)}},{key:"onError",value:function(){M.pushError(this,'Could not play "'.concat(this.nowPlaying.track.title,'".')),this.$store.commit(m.Next)}},{key:"onPlay",value:function(){this.$store.commit(m.Play)}},{key:"onPause",value:function(){this.$store.commit(m.Pause)}},{key:"emitValues",value:function(){if(this.audio){var t={currentTime:this.audio.currentTime,duration:this.audio.duration};this.$emit("playback-data",t)}}},{key:"play",value:function(){this.$store.commit(m.Play),this.audio.play()}},{key:"pause",value:function(){this.$store.commit(m.Pause),this.audio.pause()}}]),n}(f["d"]);Object(b["a"])([Object(f["e"])("nowPlaying")],V.prototype,"onNowPlayingChanged",null),Object(b["a"])([Object(f["e"])("paused")],V.prototype,"onPausedChanged",null),Object(b["a"])([Object(f["e"])("volume")],V.prototype,"onVolumeChanged",null),V=Object(b["a"])([Object(f["a"])({components:{}})],V);var R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"progress-bar",staticClass:"progress-bar",on:{click:t.onClick,mousemove:t.onMouseMove,mousedown:t.onMouseDown,mouseup:t.onMouseUp,mouseleave:t.onMouseLeave}},[n("div",{staticClass:"bar"},[n("div",{staticClass:"filled-in",style:{width:t.percentage}})])])},z=[],Q=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"value",void 0),Object(v["a"])(Object(u["a"])(t),"progressBar",void 0),Object(v["a"])(Object(u["a"])(t),"mouseDown",!1),t}return Object(c["a"])(n,[{key:"percentage",get:function(){return this.value?100*this.value+"%":"0%"}},{key:"onClick",value:function(t){this.emitValue(t)}},{key:"onMouseMove",value:function(t){this.mouseDown&&this.emitValue(t)}},{key:"onMouseDown",value:function(){this.mouseDown=!0}},{key:"onMouseUp",value:function(){this.mouseDown=!1}},{key:"onMouseLeave",value:function(){this.mouseDown=!1}},{key:"emitValue",value:function(t){var e=this.getValue(t);this.$emit("value-selected",e)}},{key:"getValue",value:function(t){var e=this.progressBar.getBoundingClientRect(),n=t.clientX-e.left;return this.clamp(n/e.width)}},{key:"clamp",value:function(t){return t>1?1:t<0?0:t}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])()],Q.prototype,"value",void 0),Object(b["a"])([Object(f["c"])("progress-bar")],Q.prototype,"progressBar",void 0),Q=Object(b["a"])([f["a"]],Q);var q=Q,H=q,L=(n("68b4"),n("2877")),F=Object(L["a"])(H,R,z,!1,null,"345f1884",null),G=F.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"volume"},[n("a",{staticClass:"button",on:{click:function(e){return t.toggleMute()}}},[t.muted?t._e():n("i",{staticClass:"fas fa-volume-up"}),t.muted?n("i",{staticClass:"fas fa-volume-mute"}):t._e()]),n("div",{staticClass:"bar"},[n("VerticalProgressBar",{attrs:{value:t.volume},on:{"value-selected":t.changeVolume}})],1)])},K=[],W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"progress-bar",staticClass:"vertical-progress-bar",on:{click:t.onClick,mousemove:t.onMouseMove,mousedown:t.onMouseDown,mouseup:t.onMouseUp,mouseleave:t.onMouseLeave}},[n("div",{staticClass:"bar"},[n("div",{staticClass:"filled-in",style:{height:t.percentage}})])])},J=[],X=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"value",void 0),Object(v["a"])(Object(u["a"])(t),"progressBar",void 0),Object(v["a"])(Object(u["a"])(t),"mouseDown",!1),t}return Object(c["a"])(n,[{key:"percentage",get:function(){return this.value?100*this.value+"%":"0%"}},{key:"onClick",value:function(t){this.emitValue(t)}},{key:"onMouseMove",value:function(t){this.mouseDown&&this.emitValue(t)}},{key:"onMouseDown",value:function(){this.mouseDown=!0}},{key:"onMouseUp",value:function(){this.mouseDown=!1}},{key:"onMouseLeave",value:function(){this.mouseDown=!1}},{key:"emitValue",value:function(t){var e=this.getValue(t);this.$emit("value-selected",e)}},{key:"getValue",value:function(t){var e=this.progressBar.getBoundingClientRect(),n=t.clientY-e.top;return this.clamp(1-n/e.height)}},{key:"clamp",value:function(t){return t>1?1:t<0?0:t}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])()],X.prototype,"value",void 0),Object(b["a"])([Object(f["c"])("progress-bar")],X.prototype,"progressBar",void 0),X=Object(b["a"])([f["a"]],X);var Z=X,tt=Z,et=(n("3e4c"),Object(L["a"])(tt,W,J,!1,null,"37fb6a78",null)),nt=et.exports,at=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return Object(c["a"])(n,[{key:"volume",get:function(){return this.$store.getters.volume}},{key:"muted",get:function(){return this.$store.state.muted}},{key:"toggleMute",value:function(){this.$store.state.muted?this.$store.commit(m.Unmute):this.$store.commit(m.Mute)}},{key:"changeVolume",value:function(t){var e={volume:t};this.$store.commit(m.SetVolume,e)}}]),n}(f["d"]);at=Object(b["a"])([Object(f["a"])({components:{VerticalProgressBar:nt}})],at);var it=at,rt=it,ot=(n("b5ae"),Object(L["a"])(rt,Y,K,!1,null,"19d054ae",null)),st=ot.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"indicator"},[n("div",{staticClass:"bar",class:{enabled:t.state},style:{width:t.barWidth}}),n("div",{staticClass:"content"},[t._t("default")],2)])},ut=[],lt=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"state",void 0),Object(v["a"])(Object(u["a"])(t),"width",void 0),Object(v["a"])(Object(u["a"])(t),"baseWidth",4),t}return Object(c["a"])(n,[{key:"barWidth",get:function(){return"".concat(this.baseWidth+this.width,"px")}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])({default:!1})],lt.prototype,"state",void 0),Object(b["a"])([Object(f["b"])({default:0})],lt.prototype,"width",void 0),lt=Object(b["a"])([f["a"]],lt);var dt=lt,vt=dt,bt=(n("2e48"),Object(L["a"])(vt,ct,ut,!1,null,"5752ccbc",null)),ft=bt.exports,ht=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"playbackData",void 0),Object(v["a"])(Object(u["a"])(t),"textService",new N),t}return Object(c["a"])(n,[{key:"nowPlaying",get:function(){return this.$store.getters.nowPlaying}},{key:"currentTime",get:function(){return this.nowPlaying&&this.playbackData&&this.playbackData.currentTime?this.textService.formatTime(this.playbackData.currentTime):null}},{key:"duration",get:function(){return this.nowPlaying&&this.playbackData&&this.playbackData.duration?this.textService.formatTime(this.playbackData.duration):null}},{key:"currentTimePercentage",get:function(){return this.playbackData&&this.playbackData.currentTime&&this.playbackData.duration?this.playbackData.currentTime/this.playbackData.duration:0}},{key:"paused",get:function(){return this.$store.state.paused||!this.nowPlaying}},{key:"shuffle",get:function(){return this.$store.state.shuffle}},{key:"onPlayPause",value:function(){this.paused?this.$store.commit(m.Play):this.$store.commit(m.Pause)}},{key:"onShuffle",value:function(){this.shuffle?this.$store.commit(m.NoShuffle):this.$store.commit(m.Shuffle)}},{key:"onPrevious",value:function(){this.$store.commit(m.Previous)}},{key:"onNext",value:function(){this.$store.commit(m.Next)}},{key:"seek",value:function(t){this.$root.$emit(B,t)}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])()],ht.prototype,"playbackData",void 0),ht=Object(b["a"])([Object(f["a"])({components:{ProgressBar:G,Volume:st,Indicator:ft}})],ht);var pt=ht,mt=pt,yt=(n("35d1"),Object(L["a"])(mt,D,A,!1,null,"f4cdfada",null)),Ot=yt.exports,jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player"},[n("audio",{ref:"audio",attrs:{controls:""},on:{ended:t.onEnded,error:t.onError,play:t.onPlay,pause:t.onPause}})])},gt=[],kt="seek",wt=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"intervalID",void 0),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),Object(v["a"])(Object(u["a"])(t),"currentNowPlaying",null),t}return Object(c["a"])(n,[{key:"nowPlaying",get:function(){return this.$store.getters.nowPlaying}},{key:"paused",get:function(){return this.$store.state.paused}},{key:"nowPlayingUrl",get:function(){var t=this.nowPlaying;return t?this.apiService.trackUrl(t.track):null}},{key:"audio",get:function(){return this.$refs.audio}},{key:"volume",get:function(){return this.$store.getters.volume}},{key:"onNowPlayingChanged",value:function(){if(!this.nowPlaying)return this.currentNowPlaying=null,void this.pause();this.currentNowPlaying&&this.currentNowPlaying===this.nowPlaying||(this.currentNowPlaying=this.nowPlaying,this.audio.src=this.nowPlayingUrl,this.play())}},{key:"onPausedChanged",value:function(t){t?this.audio.pause():this.audio.play()}},{key:"onVolumeChanged",value:function(t){this.audio.volume=t}},{key:"created",value:function(){this.intervalID=window.setInterval(this.emitValues,100)}},{key:"mounted",value:function(){var t=this;this.audio.volume=this.volume,this.$root.$on(kt,(function(e){t.nowPlaying&&(t.audio.currentTime=t.audio.duration*e)}))}},{key:"destroyed",value:function(){window.clearInterval(this.intervalID)}},{key:"onEnded",value:function(){this.currentNowPlaying=null,this.$store.commit(m.Next)}},{key:"onError",value:function(){M.pushError(this,'Could not play "'.concat(this.nowPlaying.track.title,'".')),this.$store.commit(m.Next)}},{key:"onPlay",value:function(){this.$store.commit(m.Play)}},{key:"onPause",value:function(){this.$store.commit(m.Pause)}},{key:"emitValues",value:function(){if(this.audio){var t={currentTime:this.audio.currentTime,duration:this.audio.duration};this.$emit("playback-data",t)}}},{key:"play",value:function(){this.$store.commit(m.Play),this.audio.play()}},{key:"pause",value:function(){this.$store.commit(m.Pause),this.audio.pause()}}]),n}(f["d"]);Object(b["a"])([Object(f["e"])("nowPlaying")],wt.prototype,"onNowPlayingChanged",null),Object(b["a"])([Object(f["e"])("paused")],wt.prototype,"onPausedChanged",null),Object(b["a"])([Object(f["e"])("volume")],wt.prototype,"onVolumeChanged",null),wt=Object(b["a"])([Object(f["a"])({components:{}})],wt);var Ct,_t,xt,Pt=wt,$t=Pt,St=(n("15f8"),Object(L["a"])($t,jt,gt,!1,null,"14454b50",null)),Tt=St.exports,It=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"notifications"},t._l(t.notifications,(function(e){return n("li",{key:e.id,staticClass:"notification",class:[e.class,t.shouldHide(e)?"hide":""]},[n("div",{staticClass:"text"},[t._v(" "+t._s(e.text)+" ")]),e.extra?n("div",{staticClass:"extra"},[t._v(" "+t._s(e.extra)+" ")]):t._e()])})),0)},Et=[],Dt=(_t=Ct=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"notifications",[]),Object(v["a"])(Object(u["a"])(t),"intervalID",void 0),t}return Object(c["a"])(n,[{key:"mounted",value:function(){var t=this;this.$root.$on(xt.notificationEvent,(function(e){t.notifications.splice(0,0,e)})),this.intervalID=window.setInterval(this.processErrors,100)}},{key:"destroyed",value:function(){window.clearInterval(this.intervalID)}},{key:"shouldHide",value:function(t){var e=this.duration(new Date,t.created);return e>xt.visibilityDuration}},{key:"processErrors",value:function(){var t=this;this.notifications=this.notifications.filter((function(e){var n=t.duration(new Date,e.created);return n<xt.visibilityDuration+xt.animationDuration}))}},{key:"duration",value:function(t,e){return(t.getTime()-e.getTime())/1e3}}],[{key:"pushError",value:function(t,e,n){var a=n&&n.response&&n.response.data&&n.response.data.message?n.response.data.message:null,i={id:this.notificationId++,class:"error",created:new Date,text:e,extra:a};t.$root.$emit(this.notificationEvent,i)}},{key:"pushSuccess",value:function(t,e){var n={id:this.notificationId++,class:"success",created:new Date,text:e,extra:null};t.$root.$emit(this.notificationEvent,n)}}]),n}(f["d"]),Object(v["a"])(Ct,"notificationEvent","eggplant_notification"),Object(v["a"])(Ct,"notificationId",0),Object(v["a"])(Ct,"visibilityDuration",10),Object(v["a"])(Ct,"animationDuration",2),xt=_t);Dt=xt=Object(b["a"])([f["a"]],Dt);var At=Dt,Nt=At,Ut=(n("2cd4"),Object(L["a"])(Nt,It,Et,!1,null,"fa2d66b2",null)),Mt=Ut.exports,Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isConverting?n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.text,expression:"text"}],staticClass:"conversion-status"},[n("spinner")],1):t._e()},Vt=[],Rt=(n("b680"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),zt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner"},[n("i",{staticClass:"fas fa-circle-notch fa-spin"})])}],Qt=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return n}(f["d"]);Qt=Object(b["a"])([f["a"]],Qt);var qt=Qt,Ht=qt,Lt=(n("aacf"),Object(L["a"])(Ht,Rt,zt,!1,null,"5bbc4aac",null)),Ft=Lt.exports,Gt=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"stats",null),Object(v["a"])(Object(u["a"])(t),"timeoutId",null),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"created",value:function(){this.update()}},{key:"destroyed",value:function(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},{key:"isConverting",get:function(){var t=this.getThumbnailStats();if(t&&t.allItems>t.convertedItems)return!0;var e=this.getTrackStats();return!!(e&&e.allItems>e.convertedItems)}},{key:"text",get:function(){var t=[],e=this.getThumbnailStats();if(e){var n=this.getPercentage(e);null!==n&&100!==n&&t.push("Converting thumbnails (".concat(this.getPercentageText(n),")."))}var a=this.getTrackStats();if(a){var i=this.getPercentage(a);null!==i&&100!==i&&t.push("Converting tracks (".concat(this.getPercentageText(i),")."))}return t.join(" ")}},{key:"getPercentage",value:function(t){return 0===t.allItems?null:t.convertedItems/t.allItems*100}},{key:"getPercentageText",value:function(t){var e=t.toFixed(0);return"".concat(e,"%")}},{key:"schedule",value:function(){this.timeoutId=window.setTimeout(this.update,1e4)}},{key:"update",value:function(){var t=this;this.apiService.stats().then((function(e){t.stats=e.data,t.schedule()}),(function(){t.stats=null,t.schedule()}))}},{key:"getThumbnailStats",value:function(){return this.stats?this.stats.thumbnails:null}},{key:"getTrackStats",value:function(){return this.stats?this.stats.tracks:null}}]),n}(f["d"]);Gt=Object(b["a"])([Object(f["a"])({components:{Spinner:Ft}})],Gt);var Yt=Gt,Kt=Yt,Wt=(n("eaaaa"),Object(L["a"])(Kt,Bt,Vt,!1,null,"6945a876",null)),Jt=Wt.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"now-playing",class:{hidden:!t.nowPlaying}},[t.nowPlaying?n("div",{staticClass:"trackTitle"},[n("a",{on:{click:function(e){return t.goToNowPlayingSong()}}},[t._v(" "+t._s(t.trackTitle)+" ")])]):t._e(),t.nowPlaying?n("div",{staticClass:"albumTitle"},[n("a",{on:{click:function(e){return t.goToNowPlayingAlbum()}}},[t._v(" "+t._s(t.albumTitle)+" ")])]):t._e()])},Zt=[],te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"thumbnail"},[t.album.thumbnail?n("div",{staticClass:"artwork"},[n("img",{ref:"image",attrs:{src:t.thumbnailUrl},on:{error:t.onError,load:t.onLoad}}),t.converting?n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This thumbnail has not been converted yet.",expression:"'This thumbnail has not been converted yet.'"}],staticClass:"spinner-container"},[n("spinner")],1):t._e()]):t._e(),t.album.thumbnail?t._e():n("div",{staticClass:"icon"},[n("i",{staticClass:"fas fa-compact-disc"})])])},ee=[],ne=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"album",void 0),Object(v["a"])(Object(u["a"])(t),"image",void 0),Object(v["a"])(Object(u["a"])(t),"converting",!1),Object(v["a"])(Object(u["a"])(t),"timeoutId",void 0),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"thumbnailUrl",get:function(){return this.album?this.apiService.thumbnailUrl(this.album):null}},{key:"destroyed",value:function(){this.clearTimeout()}},{key:"onError",value:function(){this.converting=!0,this.reload()}},{key:"onLoad",value:function(){this.converting=!1}},{key:"reload",value:function(){var t=this;this.clearTimeout(),this.timeoutId=window.setTimeout((function(){return t.image.src=t.thumbnailUrl}),5e3)}},{key:"clearTimeout",value:function(){this.timeoutId&&window.clearTimeout(this.timeoutId)}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])()],ne.prototype,"album",void 0),Object(b["a"])([Object(f["c"])()],ne.prototype,"image",void 0),ne=Object(b["a"])([Object(f["a"])({components:{Spinner:Ft}})],ne);var ae=ne,ie=ae,re=(n("b6e4"),Object(L["a"])(ie,te,ee,!1,null,"11a00a88",null)),oe=re.exports,se=(n("159b"),n("d81d"),function(){function t(){Object(s["a"])(this,t)}return Object(c["a"])(t,[{key:"getBrowse",value:function(t){var e=[];t.parents&&t.parents.map((function(t){return t.id})).forEach((function(t){return e.push(t)}));var n=e.join("/");return{path:"/browse/".concat(n)}}}]),t}()),ce=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"navigationService",new se),t}return Object(c["a"])(n,[{key:"nowPlaying",get:function(){return this.$store.getters.nowPlaying}},{key:"trackTitle",get:function(){return this.nowPlaying&&this.nowPlaying.track?this.nowPlaying.track.title:null}},{key:"albumTitle",get:function(){return this.nowPlaying&&this.nowPlaying.album?this.nowPlaying.album.title:null}},{key:"goToNowPlayingSong",value:function(){this.goToNowPlayingAlbum()}},{key:"goToNowPlayingAlbum",value:function(){var t=this.navigationService.getBrowse(this.nowPlaying.album);this.$router.push(t)}}]),n}(f["d"]);ce=Object(b["a"])([Object(f["a"])({components:{Thumbnail:oe}})],ce);var ue=ce,le=ue,de=(n("2099"),Object(L["a"])(le,Xt,Zt,!1,null,"2b870c54",null)),ve=de.exports,be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},fe=[],he=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"nowPlaying",get:function(){return this.$store.getters.nowPlaying}},{key:"paused",get:function(){return!this.$store.getters.nowPlaying||this.$store.state.paused}},{key:"onNowPlayingChanged",value:function(){var t=this.mediaSession;if(t){if(!this.nowPlaying)return void(t.metadata=null);var e={title:this.nowPlaying.track.title,album:this.nowPlaying.album.title,artwork:[{src:null,sizes:null}]};if(this.nowPlaying.album.thumbnail){var n=this.apiService.thumbnailUrl(this.nowPlaying.album);e.artwork=[{src:n,sizes:"200x200"}]}t.metadata=new MediaMetadata(e)}}},{key:"onPausedChanged",value:function(){var t=this.mediaSession;t&&(t.playbackState=this.paused?"paused":"playing")}},{key:"created",value:function(){var t=this,e=this.mediaSession;e&&(e.setActionHandler("play",(function(){return t.onPlay()})),e.setActionHandler("pause",(function(){return t.onPause()})),e.setActionHandler("previoustrack",(function(){return t.onPrevious()})),e.setActionHandler("nexttrack",(function(){return t.onNext()})))}},{key:"onPlay",value:function(){this.$store.commit(m.Play)}},{key:"onPause",value:function(){this.$store.commit(m.Pause)}},{key:"onPrevious",value:function(){this.$store.commit(m.Previous)}},{key:"onNext",value:function(){this.$store.commit(m.Next)}},{key:"mediaSession",get:function(){return"mediaSession"in window.navigator?window.navigator.mediaSession:null}}]),n}(f["d"]);Object(b["a"])([Object(f["e"])("nowPlaying")],he.prototype,"onNowPlayingChanged",null),Object(b["a"])([Object(f["e"])("paused")],he.prototype,"onPausedChanged",null),he=Object(b["a"])([f["a"]],he);var pe=he,me=pe,ye=Object(L["a"])(me,be,fe,!1,null,null,null),Oe=ye.exports,je=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"playbackData",null),Object(v["a"])(Object(u["a"])(t),"errCheckSetup","Could not confirm whether this instance's setup process was completed."),Object(v["a"])(Object(u["a"])(t),"errCheckUser","Could not retrieve the current user."),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"created",value:function(){window.addEventListener("keydown",this.onKeyDown),this.redirectToSetupIfNeeded(),this.loadCurrentUser()}},{key:"destroyed",value:function(){window.removeEventListener("keydown",this.onKeyDown)}},{key:"onKeyDown",value:function(t){"Space"===t.code&&(this.$store.state.paused?this.$store.commit(m.Play):this.$store.commit(m.Pause))}},{key:"onPlaybackData",value:function(t){this.playbackData=t}},{key:"isCsd",get:function(){var t=new Date,e=t.getDate(),n=t.getMonth()+1;return 28===e&&6===n}},{key:"redirectToSetupIfNeeded",value:function(){var t=this;this.apiService.stats().then((function(e){0===e.data.users&&t.$router.push({name:"setup"})}),(function(e){Mt.pushError(t,t.errCheckSetup,e)}))}},{key:"loadCurrentUser",value:function(){var t=this;this.apiService.refreshCurrentUser().catch((function(e){Mt.pushError(t,t.errCheckUser,e)}))}}]),n}(f["d"]);je=Object(b["a"])([Object(f["a"])({components:{Controls:Ot,Player:Tt,ConversionStatus:Jt,Notifications:Mt,NowPlaying:ve,MediaSession:Oe}})],je);var ge=je,ke=ge,we=(n("9d14"),Object(L["a"])(ke,r,o,!1,null,null,null)),Ce=we.exports,_e=n("8c4f"),xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"browse",class:{forbidden:t.forbidden}},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"topbar"},[n("search-input",{staticClass:"search"}),n("ul",{staticClass:"buttons"},[n("li",{staticClass:"button",class:{active:t.showQueue}},[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.showQueue?"Close queue.":"Queue.",expression:"showQueue ? 'Close queue.' : 'Queue.'"}],on:{click:t.toggleQueue}},[n("i",{staticClass:"fas fa-list-ol"})])]),n("li",{staticClass:"button"},[n("login-button")],1)])],1),n("div",{ref:"content",staticClass:"content"},[t.album?t._e():n("spinner",{staticClass:"spinner"}),t.album?n("div",{staticClass:"album"},[n("div",{staticClass:"artwork"},[n("thumbnail",{attrs:{album:t.album}})],1),n("div",{staticClass:"info"},[n("ul",{staticClass:"crumbs"},[n("li",[n("router-link",{attrs:{to:"/browse"}},[t._v(" Eggplant ")])],1),t._l(t.album.parents,(function(e){return n("li",[n("router-link",{attrs:{to:t.parentUrl(e)}},[t._v(" "+t._s(e.title)+" ")])],1)}))],2),n("div",{staticClass:"title"},[t._v(" "+t._s(t.album.title)+" ")]),t.numberOfTracks>0?n("div",{staticClass:"details"},[t._v(" "+t._s(t.numberOfTracks)+" tracks, "+t._s(t.totalDurationMinutes)+" minutes ")]):t._e(),t.numberOfTracks>0?n("ul",{staticClass:"actions"},[n("li",[n("a",{staticClass:"play",on:{click:t.playAlbum}},[n("i",{staticClass:"icon fas fa-play"})])]),n("li",[n("dropdown",{ref:"dropdown",scopedSlots:t._u([{key:"trigger",fn:function(){return[n("a",{staticClass:"secondary"},[n("i",{staticClass:"fas fa-ellipsis-h"})])]},proxy:!0},{key:"content",fn:function(){return[n("dropdown-element",[n("a",{on:{click:t.addAlbumToQueue}},[t._v(" Add album to queue ")])])]},proxy:!0}],null,!1,684935244)})],1)]):t._e()])]):t._e(),t.album&&t.album.tracks?n("div",[n("SubHeader",{attrs:{text:"Tracks"}}),n("Tracks",{attrs:{entries:t.entries}})],1):t._e(),t.album&&t.album.albums?n("div",[n("SubHeader",{attrs:{text:"Albums"}}),n("Albums",{attrs:{albums:t.album.albums},on:{"select-album":t.selectAlbum}})],1):t._e(),!t.album||t.album.albums||t.album.tracks?t._e():n("div",{staticClass:"no-content-message"},[t._v(" The music library is empty or you do not have permissions to view any tracks or albums. ")])],1),t.showQueue?n("div",{staticClass:"content queue"},[n("main-header",{attrs:{text:"Queue"}}),n("queue",{on:{navigation:t.onQueueNavigation}})],1):t._e(),t._m(0)])])},Pe=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"forbidden-message"},[n("div",{staticClass:"message"},[n("div",{staticClass:"icon"},[n("i",{staticClass:"fas fa-exclamation-triangle"})]),t._v(" Access denied, please confirm that you are signed in. ")])])}],$e=(n("7db0"),n("ac1f"),n("1276"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"subheader"},[n("div",{staticClass:"text"},[t._v(t._s(t.text))]),n("div",{staticClass:"line"})])}),Se=[],Te=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"text",void 0),t}return n}(f["d"]);Object(b["a"])([Object(f["b"])()],Te.prototype,"text",void 0),Te=Object(b["a"])([f["a"]],Te);var Ie=Te,Ee=Ie,De=(n("0499"),Object(L["a"])(Ee,$e,Se,!1,null,"1b676b41",null)),Ae=De.exports,Ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-header"},[n("div",{staticClass:"text"},[t._v(t._s(t.text))])])},Ue=[],Me=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"text",void 0),t}return n}(f["d"]);Object(b["a"])([Object(f["b"])()],Me.prototype,"text",void 0),Me=Object(b["a"])([f["a"]],Me);var Be=Me,Ve=Be,Re=(n("db83"),Object(L["a"])(Ve,Ne,Ue,!1,null,"150104fa",null)),ze=Re.exports,Qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"albums"},t._l(t.albums,(function(e){return n("a",{staticClass:"album",on:{click:function(n){return t.selectAlbum(e)}}},[n("div",{staticClass:"image"},[n("thumbnail",{attrs:{album:e}})],1),n("div",{staticClass:"title"},[t._v(" "+t._s(e.title)+" ")])])})),0)},qe=[],He=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"albums",void 0),t}return Object(c["a"])(n,[{key:"selectAlbum",value:function(t){this.$emit("select-album",t)}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])()],He.prototype,"albums",void 0),He=Object(b["a"])([Object(f["a"])({components:{Thumbnail:oe}})],He);var Le=He,Fe=Le,Ge=(n("e951"),Object(L["a"])(Fe,Qe,qe,!1,null,"c5523daa",null)),Ye=Ge.exports,Ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"tracks"},t._l(t.entries,(function(e,a){return n("li",{staticClass:"track"},[n("div",{staticClass:"play",class:{playing:t.isNowPlaying(a,e.track)}},[n("a",{staticClass:"button",on:{click:function(e){return t.playTrack(a)}}},[n("i",{staticClass:"icon fas fa-play"})]),n("div",{staticClass:"number"},[t._v(" "+t._s(a+1)+". ")])]),n("div",{staticClass:"title",attrs:{title:e.track.title}},[t._v(" "+t._s(e.track.title)+" ")]),n("dropdown",{ref:"dropdowns",refInFor:!0,staticClass:"actions",scopedSlots:t._u([{key:"trigger",fn:function(){return[n("div",{staticClass:"target"},[n("i",{staticClass:"fas fa-ellipsis-h"})])]},proxy:!0},{key:"content",fn:function(){return[n("dropdown-element",[n("a",{on:{click:function(n){return t.addToQueue(e)}}},[t._v(" Add to queue ")])]),t.queueMode?n("dropdown-element",[n("a",{on:{click:function(n){return t.removeFromQueue(e)}}},[t._v(" Remove from queue ")])]):t._e(),t.queueMode?n("dropdown-divider"):t._e(),t.queueMode?n("dropdown-element",[n("a",{on:{click:function(n){return t.goToAlbum(e)}}},[t._v(" Go to album ")])]):t._e()]},proxy:!0}],null,!0)}),n("div",{staticClass:"duration"},[t.isBeingConverted(e.track)?t._e():n("div",[t._v(" "+t._s(t.formatDuration(e.track))+" ")]),t.isBeingConverted(e.track)?n("div",[n("spinner",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"This track has not been converted yet.",expression:"'This track has not been converted yet.'"}]})],1):t._e()])],1)})),0)},We=[],Je=n("b85c"),Xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown"},[t.isOpen?n("div",{staticClass:"close-overlay",on:{click:t.close}}):t._e(),n("div",{staticClass:"black-overlay",class:{dark:t.isOpen}}),n("div",{staticClass:"wrapper"},[n("a",{ref:"trigger",staticClass:"trigger",on:{click:t.open}},[t._t("trigger")],2),t.isOpen?n("div",{staticClass:"arrow",style:{top:t.arrowTop,left:t.arrowLeft}}):t._e(),t.isOpen?n("ul",{staticClass:"content",style:{top:t.top,left:t.left}},[t._t("content")],2):t._e()])])},Ze=[],tn=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"isOpen",!1),Object(v["a"])(Object(u["a"])(t),"top",""),Object(v["a"])(Object(u["a"])(t),"left",""),Object(v["a"])(Object(u["a"])(t),"arrowTop",""),Object(v["a"])(Object(u["a"])(t),"arrowLeft",""),Object(v["a"])(Object(u["a"])(t),"trigger",void 0),t}return Object(c["a"])(n,[{key:"created",value:function(){window.addEventListener("resize",this.onResize)}},{key:"destroyed",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onResize",value:function(){this.refreshPositions()}},{key:"open",value:function(){this.refreshPositions(),this.isOpen=!0}},{key:"close",value:function(){this.isOpen=!1}},{key:"refreshPositions",value:function(){var t=this.trigger.getBoundingClientRect();this.top=t.bottom+"px",this.left=t.x+"px",this.arrowTop=t.bottom+"px",this.arrowLeft=t.x+t.width/2+"px"}}]),n}(f["d"]);Object(b["a"])([Object(f["c"])("trigger")],tn.prototype,"trigger",void 0),tn=Object(b["a"])([f["a"]],tn);var en=tn,nn=en,an=(n("7fbd"),Object(L["a"])(nn,Xe,Ze,!1,null,"948cd978",null)),rn=an.exports,on=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"dropdown-element"},[t._t("default")],2)},sn=[],cn=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return n}(f["d"]);cn=Object(b["a"])([f["a"]],cn);var un=cn,ln=un,dn=(n("ee62"),Object(L["a"])(ln,on,sn,!1,null,"35969062",null)),vn=dn.exports,bn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"dropdown-divider"})},fn=[],hn=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return n}(f["d"]);hn=Object(b["a"])([f["a"]],hn);var pn=hn,mn=pn,yn=(n("1f42"),Object(L["a"])(mn,bn,fn,!1,null,"c65ccd08",null)),On=yn.exports,jn=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"entries",void 0),Object(v["a"])(Object(u["a"])(t),"queueMode",void 0),Object(v["a"])(Object(u["a"])(t),"dropdowns",void 0),Object(v["a"])(Object(u["a"])(t),"textService",new N),Object(v["a"])(Object(u["a"])(t),"navigationService",new se),t}return Object(c["a"])(n,[{key:"isNowPlaying",value:function(t,e){var n=this.$store.getters.nowPlaying;return!!n&&(this.queueMode?t===this.$store.state.playingIndex:e.id===n.track.id)}},{key:"isBeingConverted",value:function(t){return!t.duration}},{key:"playTrack",value:function(t){var e=this.entries.map((function(t){return{album:t.album,track:t.track}})),n={entries:e,playingIndex:t};this.$store.commit(m.Replace,n)}},{key:"addToQueue",value:function(t){var e={entries:[t]};this.$store.commit(m.Append,e),this.closeDropdowns(),M.pushSuccess(this,"Song added to queue.")}},{key:"removeFromQueue",value:function(t){var e={entry:t};this.$store.commit(m.Remove,e),this.closeDropdowns()}},{key:"goToAlbum",value:function(t){var e=this,n=this.navigationService.getBrowse(t.album);this.$router.push(n).finally((function(){e.closeDropdowns(),e.$emit("navigation")}))}},{key:"formatDuration",value:function(t){return this.textService.formatTime(t.duration)}},{key:"closeDropdowns",value:function(){var t,e=Object(Je["a"])(this.dropdowns);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.close()}}catch(a){e.e(a)}finally{e.f()}}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])()],jn.prototype,"entries",void 0),Object(b["a"])([Object(f["b"])()],jn.prototype,"queueMode",void 0),Object(b["a"])([Object(f["c"])("dropdowns")],jn.prototype,"dropdowns",void 0),jn=Object(b["a"])([Object(f["a"])({components:{Spinner:Ft,Dropdown:rn,DropdownElement:vn,DropdownDivider:On}})],jn);var gn=jn,kn=gn,wn=(n("f9f1"),Object(L["a"])(kn,Ke,We,!1,null,"27c0dd43",null)),Cn=wn.exports,_n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login-button"},[t.loading?n("div",{staticClass:"button"},[n("spinner")],1):t._e(),!t.loading&&t.user?n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"You are signed in as "+t.user.username+".",expression:"'You are signed in as '+ user.username + '.'"}],staticClass:"button",on:{click:t.settings}},[n("i",{staticClass:"fas fa-user-check"})]):t._e(),t.loading||t.user?t._e():n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"You are not signed in, some content may not be visible.",expression:"'You are not signed in, some content may not be visible.'"}],staticClass:"button",on:{click:t.login}},[n("i",{staticClass:"fas fa-user-times"})])])},xn=[],Pn=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return Object(c["a"])(n,[{key:"loading",get:function(){return void 0===this.user}},{key:"user",get:function(){return this.$store.state.user}},{key:"login",value:function(){this.$router.push({name:"login",query:{next:window.location.pathname}})}},{key:"settings",value:function(){this.$router.push({name:"settings"})}}]),n}(f["d"]);Pn=Object(b["a"])([Object(f["a"])({components:{Spinner:Ft}})],Pn);var $n=Pn,Sn=$n,Tn=(n("2206"),Object(L["a"])(Sn,_n,xn,!1,null,"69a33e93",null)),In=Tn.exports,En=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-input"},[t._m(0),n("input",{attrs:{type:"text",placeholder:"Search"},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])},Dn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"icon"},[n("i",{staticClass:"fas fa-search"})])}],An=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"value",void 0),t}return n}(f["d"]);Object(b["a"])([Object(f["b"])()],An.prototype,"value",void 0),An=Object(b["a"])([f["a"]],An);var Nn=An,Un=Nn,Mn=(n("e9c6"),Object(L["a"])(Un,En,Dn,!1,null,"5409bd8a",null)),Bn=Mn.exports,Vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"queue"},[t.empty?n("div",{staticClass:"message"},[t._v(" Your queue is empty. ")]):t._e(),n("tracks",{attrs:{entries:t.entries,queueMode:!0},on:{navigation:t.onNavigation}})],1)},Rn=[],zn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-input"},[t.icon?n("div",{staticClass:"icon"},[n("i",{class:t.icon})]):t._e(),n("input",{attrs:{type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)},keydown:t.onKeyDown}})])},Qn=[],qn=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"type",void 0),Object(v["a"])(Object(u["a"])(t),"placeholder",void 0),Object(v["a"])(Object(u["a"])(t),"value",void 0),Object(v["a"])(Object(u["a"])(t),"icon",void 0),t}return Object(c["a"])(n,[{key:"onKeyDown",value:function(t){"Enter"===t.key&&this.$emit("submit")}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])()],qn.prototype,"type",void 0),Object(b["a"])([Object(f["b"])()],qn.prototype,"placeholder",void 0),Object(b["a"])([Object(f["b"])()],qn.prototype,"value",void 0),Object(b["a"])([Object(f["b"])()],qn.prototype,"icon",void 0),qn=Object(b["a"])([f["a"]],qn);var Hn=qn,Ln=Hn,Fn=(n("a272"),Object(L["a"])(Ln,zn,Qn,!1,null,"150c07e4",null)),Gn=Fn.exports,Yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",{staticClass:"app-button",class:{disabled:t.disabled,working:t.working},on:{click:t.onClick}},[t.working?t._e():n("span",[t._v(t._s(t.text))]),t.working?n("spinner"):t._e()],1)},Kn=[],Wn=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"text",void 0),Object(v["a"])(Object(u["a"])(t),"disabled",void 0),Object(v["a"])(Object(u["a"])(t),"working",void 0),t}return Object(c["a"])(n,[{key:"onClick",value:function(t){this.disabled||this.working||this.$emit("click",t)}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])()],Wn.prototype,"text",void 0),Object(b["a"])([Object(f["b"])()],Wn.prototype,"disabled",void 0),Object(b["a"])([Object(f["b"])()],Wn.prototype,"working",void 0),Wn=Object(b["a"])([Object(f["a"])({components:{Spinner:Ft}})],Wn);var Jn=Wn,Xn=Jn,Zn=(n("fd9b"),Object(L["a"])(Xn,Yn,Kn,!1,null,"59d015a9",null)),ta=Zn.exports,ea=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"action-bar-button"},[t.working?t._e():n("a",{on:{click:t.onClick}},[n("i",{class:t.icon}),t._v(" "+t._s(t.text)+" ")]),t.working?n("spinner"):t._e()],1)},na=[],aa=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"icon",void 0),Object(v["a"])(Object(u["a"])(t),"text",void 0),Object(v["a"])(Object(u["a"])(t),"working",void 0),t}return Object(c["a"])(n,[{key:"onClick",value:function(t){this.working||this.$emit("click",t)}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])()],aa.prototype,"icon",void 0),Object(b["a"])([Object(f["b"])()],aa.prototype,"text",void 0),Object(b["a"])([Object(f["b"])()],aa.prototype,"working",void 0),aa=Object(b["a"])([Object(f["a"])({components:{Spinner:Ft}})],aa);var ia=aa,ra=ia,oa=(n("c23f"),Object(L["a"])(ra,ea,na,!1,null,"3e25782c",null)),sa=oa.exports,ca=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"action-bar"},[t._t("default")],2)},ua=[],la=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return n}(f["d"]);la=Object(b["a"])([f["a"]],la);var da=la,va=da,ba=(n("00a8"),Object(L["a"])(va,ca,ua,!1,null,"3fbe51a9",null)),fa=ba.exports,ha=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){return Object(s["a"])(this,n),e.apply(this,arguments)}return Object(c["a"])(n,[{key:"nowPlaying",get:function(){return this.$store.getters.nowPlaying}},{key:"entries",get:function(){return this.$store.state.entries}},{key:"empty",get:function(){return!this.entries||0===this.entries.length}},{key:"onNavigation",value:function(){this.$emit("navigation")}}]),n}(f["d"]);ha=Object(b["a"])([Object(f["a"])({components:{MainHeader:ze,FormInput:Gn,AppButton:ta,ActionBar:fa,ActionBarButton:sa,Tracks:Cn}})],ha);var pa=ha,ma=pa,ya=(n("5f7a"),Object(L["a"])(ma,Vn,Rn,!1,null,"3ce71038",null)),Oa=ya.exports,ja=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"album",null),Object(v["a"])(Object(u["a"])(t),"forbidden",!1),Object(v["a"])(Object(u["a"])(t),"showQueue",!1),Object(v["a"])(Object(u["a"])(t),"dropdown",void 0),Object(v["a"])(Object(u["a"])(t),"contentDiv",void 0),Object(v["a"])(Object(u["a"])(t),"timeoutId",void 0),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"onRouteChanged",value:function(){this.load(),this.scrollContentToTop(),this.showQueue=!1}},{key:"created",value:function(){this.load()}},{key:"destroyed",value:function(){this.clearTimeout()}},{key:"parentUrl",value:function(t){var e=this.album.parents.indexOf(t),n=this.album.parents.filter((function(t,n){return n<=e})).map((function(t){return t.id})),a=n.join("/");return"/browse/".concat(a)}},{key:"selectAlbum",value:function(t){var e=this.album.parents?this.album.parents.map((function(t){return t.id})):[];e.push(t.id);var n=e.join("/");this.$router.push({path:"/browse/".concat(n)})}},{key:"toggleQueue",value:function(){this.showQueue=!this.showQueue}},{key:"playAlbum",value:function(){var t=this.entries.map((function(t){return{album:t.album,track:t.track}})),e={entries:t,playingIndex:0};this.$store.commit(m.Replace,e)}},{key:"addAlbumToQueue",value:function(){var t=this.entries.map((function(t){return{album:t.album,track:t.track}})),e={entries:t};this.$store.commit(m.Append,e),this.dropdown.close(),M.pushSuccess(this,"Album added to queue.")}},{key:"onQueueNavigation",value:function(){this.scrollContentToTop(),this.showQueue=!1}},{key:"noContent",get:function(){return!!this.album&&(!(this.album.tracks&&this.album.tracks.length>0)&&!(this.album.albums&&this.album.albums.length>0))}},{key:"numberOfTracks",get:function(){return this.album&&this.album.tracks?this.album.tracks.length:0}},{key:"entries",get:function(){var t=this;return this.album&&this.album.tracks?this.album.tracks.map((function(e){return{track:e,album:t.album}})):[]}},{key:"totalDurationMinutes",get:function(){return this.album&&this.album.tracks?Math.ceil(this.album.tracks.reduce((function(t,e){return e.duration?t+e.duration:t}),0)/60):0}},{key:"load",value:function(){var t=this;this.album=null,this.clearTimeout();var e=this.getIdsFromRoute();this.apiService.browse(e).then((function(e){if(t.album=e.data,t.album.tracks){var n=t.album.tracks.find((function(t){return!t.duration}));n&&t.scheduleTimeout()}}),(function(e){403===e.response.status&&(t.forbidden=!0),M.pushError(t,"Could not list the tracks and albums.",e),t.scheduleTimeout()}))}},{key:"scheduleTimeout",value:function(){this.clearTimeout(),this.timeoutId=window.setTimeout(this.load,5e3)}},{key:"clearTimeout",value:function(){this.timeoutId&&(window.clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"getIdsFromRoute",value:function(){var t=this.$route.params;return t.pathMatch?t.pathMatch.split("/"):[]}},{key:"scrollContentToTop",value:function(){this.contentDiv.scrollTop=0}}]),n}(f["d"]);Object(b["a"])([Object(f["c"])("dropdown")],ja.prototype,"dropdown",void 0),Object(b["a"])([Object(f["c"])("content")],ja.prototype,"contentDiv",void 0),Object(b["a"])([Object(f["e"])("$route")],ja.prototype,"onRouteChanged",null),ja=Object(b["a"])([Object(f["a"])({components:{Albums:Ye,SubHeader:Ae,MainHeader:ze,Tracks:Cn,Thumbnail:oe,NowPlaying:ve,SearchInput:Bn,LoginButton:In,Spinner:Ft,Queue:Oa,Dropdown:rn,DropdownElement:vn,DropdownDivider:On}})],ja);var ga=ja,ka=ga,wa=(n("d9af"),Object(L["a"])(ka,xe,Pe,!1,null,"5bf44ede",null)),Ca=wa.exports,_a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"initialize"},[n("main-header",{attrs:{text:"Create an administrator account"}}),n("div",{staticClass:"center"},[n("form",[n("form-input",{attrs:{type:"text",placeholder:"Username",icon:"fas fa-user"},on:{submit:t.submit},model:{value:t.cmd.username,callback:function(e){t.$set(t.cmd,"username",e)},expression:"cmd.username"}}),n("form-input",{attrs:{type:"password",placeholder:"Password",icon:"fas fa-key"},on:{submit:t.submit},model:{value:t.cmd.password,callback:function(e){t.$set(t.cmd,"password",e)},expression:"cmd.password"}}),n("app-button",{attrs:{text:"Proceed",disabled:!t.formValid,working:t.working},on:{click:t.submit}})],1)])],1)},xa=[],Pa=(n("5319"),function t(){Object(s["a"])(this,t),Object(v["a"])(this,"username",void 0),Object(v["a"])(this,"password",void 0)}),$a=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"cmd",new Pa),Object(v["a"])(Object(u["a"])(t),"working",!1),Object(v["a"])(Object(u["a"])(t),"errLogin","Initial setup succeeded but the automatic login failed."),Object(v["a"])(Object(u["a"])(t),"errSetup","Error performing the initial setup."),Object(v["a"])(Object(u["a"])(t),"errCheckSetup","Could not confirm whether this instance's setup process was completed."),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"mounted",value:function(){this.redirectAwayIfNeeded()}},{key:"submit",value:function(){var t=this;this.formValid&&(this.working=!0,this.apiService.initialize(this.cmd).then((function(){var e={username:t.cmd.username,password:t.cmd.password};t.apiService.login(e).then((function(){t.working=!1,t.$router.replace({name:"browse"})}),(function(e){t.working=!1,M.pushError(t,t.errLogin,e)}))}),(function(e){t.working=!1,M.pushError(t,t.errSetup,e)})))}},{key:"formValid",get:function(){return!this.formErrors||0===this.formErrors.length}},{key:"formErrors",get:function(){var t=[];return this.cmd.username||t.push("Username can not be empty."),this.cmd.password||t.push("Password can not be empty."),t}},{key:"redirectAwayIfNeeded",value:function(){var t=this;this.apiService.stats().then((function(e){0!==e.data.users&&t.$router.replace({name:"browse"})}),(function(e){M.pushError(t,t.errCheckSetup,e)}))}}]),n}(f["d"]);$a=Object(b["a"])([Object(f["a"])({components:{MainHeader:ze,SubHeader:Ae,FormInput:Gn,AppButton:ta}})],$a);var Sa=$a,Ta=Sa,Ia=(n("4890"),Object(L["a"])(Ta,_a,xa,!1,null,"704593ab",null)),Ea=Ia.exports,Da=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("action-bar",[n("action-bar-button",{attrs:{text:"Go back to the music",icon:"fas fa-arrow-left"},on:{click:t.goToBrowse}})],1),n("main-header",{attrs:{text:"Sign in"}}),n("div",{staticClass:"center"},[n("form",[n("form-input",{attrs:{type:"text",placeholder:"Username",icon:"fas fa-user"},on:{submit:t.submit},model:{value:t.cmd.username,callback:function(e){t.$set(t.cmd,"username",e)},expression:"cmd.username"}}),n("form-input",{attrs:{type:"password",placeholder:"Password",icon:"fas fa-key"},on:{submit:t.submit},model:{value:t.cmd.password,callback:function(e){t.$set(t.cmd,"password",e)},expression:"cmd.password"}}),n("app-button",{attrs:{text:"Sign in",disabled:!t.formValid,working:t.working},on:{click:t.submit}})],1)])],1)},Aa=[],Na=function t(){Object(s["a"])(this,t),Object(v["a"])(this,"username",void 0),Object(v["a"])(this,"password",void 0)},Ua=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"cmd",new Na),Object(v["a"])(Object(u["a"])(t),"working",!1),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"onUserChanged",value:function(t){t&&this.escapeToBrowse()}},{key:"submit",value:function(){var t=this;if(this.formValid){this.working=!0;var e=this.getNext();this.apiService.login(this.cmd).then((function(){e?t.$router.replace({path:e}):t.escapeToBrowse()}),(function(e){M.pushError(t,"Sign in process could not be completed.",e)})).finally((function(){t.working=!1}))}}},{key:"goToBrowse",value:function(){this.$router.push({name:"browse"})}},{key:"escapeToBrowse",value:function(){this.$router.replace({name:"browse"})}},{key:"formValid",get:function(){return!this.formErrors||0===this.formErrors.length}},{key:"formErrors",get:function(){var t=[];return this.cmd.username||t.push("Username can not be empty."),this.cmd.password||t.push("Password can not be empty."),t}},{key:"user",get:function(){return this.$store.state.user}},{key:"getNext",value:function(){var t=this.$route.query.next;return Array.isArray(t)?t.length>0?t[0]:null:t}}]),n}(f["d"]);Object(b["a"])([Object(f["e"])("user",{immediate:!0})],Ua.prototype,"onUserChanged",null),Ua=Object(b["a"])([Object(f["a"])({components:{MainHeader:ze,FormInput:Gn,AppButton:ta,ActionBar:fa,ActionBarButton:sa}})],Ua);var Ma=Ua,Ba=Ma,Va=(n("f475"),Object(L["a"])(Ba,Da,Aa,!1,null,"42676704",null)),Ra=Va.exports,za=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"register"},[n("action-bar",[n("action-bar-button",{attrs:{text:"Go back to the music",icon:"fas fa-arrow-left"},on:{click:t.goToBrowse}})],1),n("main-header",{attrs:{text:"Sign up"}}),n("div",{staticClass:"center"},[n("form",[n("form-input",{attrs:{type:"text",placeholder:"Username",icon:"fas fa-user"},on:{submit:t.submit},model:{value:t.cmd.username,callback:function(e){t.$set(t.cmd,"username",e)},expression:"cmd.username"}}),n("form-input",{attrs:{type:"password",placeholder:"Password",icon:"fas fa-key"},on:{submit:t.submit},model:{value:t.cmd.password,callback:function(e){t.$set(t.cmd,"password",e)},expression:"cmd.password"}}),n("app-button",{attrs:{text:"Sign up",disabled:!t.formValid,working:t.working},on:{click:t.submit}})],1)])],1)},Qa=[],qa=function t(){Object(s["a"])(this,t),Object(v["a"])(this,"username",void 0),Object(v["a"])(this,"password",void 0),Object(v["a"])(this,"token",void 0)},Ha=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"cmd",new qa),Object(v["a"])(Object(u["a"])(t),"working",!1),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),Object(v["a"])(Object(u["a"])(t),"errLogin","Sign up succeeded but the automatic login failed."),Object(v["a"])(Object(u["a"])(t),"errSignUp","Error during the sign up process."),t}return Object(c["a"])(n,[{key:"onUserChanged",value:function(t){t&&this.escapeToBrowse()}},{key:"submit",value:function(){var t=this;this.formValid&&(this.working=!0,this.cmd.token=this.$route.params.token,this.apiService.register(this.cmd).then((function(){var e={username:t.cmd.username,password:t.cmd.password};t.apiService.login(e).then((function(){t.working=!1,t.escapeToBrowse()}),(function(e){t.working=!1,M.pushError(t,t.errLogin,e)}))}),(function(e){t.working=!1,M.pushError(t,t.errSignUp,e)})))}},{key:"escapeToBrowse",value:function(){this.$router.replace({name:"browse"})}},{key:"goToBrowse",value:function(){this.$router.push({name:"browse"})}},{key:"formValid",get:function(){return!this.formErrors||0===this.formErrors.length}},{key:"formErrors",get:function(){var t=[];return this.cmd.username||t.push("Username can not be empty."),this.cmd.password||t.push("Password can not be empty."),t}}]),n}(f["d"]);Object(b["a"])([Object(f["e"])("user",{immediate:!0})],Ha.prototype,"onUserChanged",null),Ha=Object(b["a"])([Object(f["a"])({components:{MainHeader:ze,SubHeader:Ae,FormInput:Gn,AppButton:ta,ActionBar:fa,ActionBarButton:sa}})],Ha);var La=Ha,Fa=La,Ga=(n("7cf3"),Object(L["a"])(Fa,za,Qa,!1,null,"ce46a62c",null)),Ya=Ga.exports,Ka=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"settings"},[n("action-bar",[n("action-bar-button",{attrs:{text:"Go back to the music",icon:"fas fa-arrow-left"},on:{click:t.goToBrowse}}),n("action-bar-button",{attrs:{text:"Sign me out",icon:"fas fa-sign-out-alt",working:t.logoutInProgress},on:{click:t.logout}}),n("action-bar-button",{attrs:{text:"Show me the statistics",icon:"fas fa-chart-pie"},on:{click:t.goToStats}})],1),n("main-header",{attrs:{text:"Settings"}}),n("sub-header",{attrs:{text:"Invitations"}}),t.user&&t.user.administrator?n("Invitations"):t._e(),n("sub-header",{attrs:{text:"Users"}}),t.user&&t.user.administrator?n("Users"):t._e(),n("sub-header",{attrs:{text:"Connected instances"}})],1)},Wa=[],Ja=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"users"},[n("table",[t._m(0),n("tbody",t._l(t.users,(function(e){return n("tr",{key:e.username,staticClass:"user"},[n("td",{staticClass:"username"},[t._v(" "+t._s(e.username)+" ")]),n("td",{staticClass:"role"},[t._v(" "+t._s(t.getRole(e))+" ")]),n("td",{staticClass:"created"},[n("timeago",{attrs:{datetime:e.created}})],1),n("td",{staticClass:"last-seen"},[n("timeago",{attrs:{datetime:e.lastSeen}})],1),n("td",{staticClass:"actions"},[n("v-popover",{attrs:{offset:"16"}},[t.canRemove(e)?n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Remove this user.",expression:"'Remove this user.'"}]},[n("i",{staticClass:"fas fa-times"})]):t._e(),n("template",{slot:"popover"},[n("p",[t._v(" This action can not be undone, do you wish to proceed? ")]),n("app-button",{directives:[{name:"close-popover",rawName:"v-close-popover"}],attrs:{text:"Confirm"},on:{click:function(n){return t.removeUser(e)}}})],1)],2)],1)])})),0)]),t.users?t._e():n("spinner")],1)},Xa=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",{staticClass:"username"},[t._v(" Username ")]),n("th",{staticClass:"role"},[t._v(" Role ")]),n("th",{staticClass:"created"},[t._v(" Signed Up ")]),n("th",{staticClass:"last-seen"},[t._v(" Last Seen ")]),n("th",{staticClass:"actions"},[t._v(" Actions ")])])}],Za=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"users",null),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"mounted",value:function(){this.load()}},{key:"getRole",value:function(t){return t.administrator?"Administrator":"User"}},{key:"canRemove",value:function(t){return t.username!==this.currentUser.username}},{key:"removeUser",value:function(t){var e=this;this.apiService.remove(t.username).then((function(){e.load()}),(function(n){M.pushError(e,"Could not remove the user '".concat(t.username,"'."),n)}))}},{key:"currentUser",get:function(){return this.$store.state.user}},{key:"load",value:function(){var t=this;this.users=null,this.apiService.list().then((function(e){t.users=e.data}),(function(e){M.pushError(t,"Could not list the user accounts.",e)}))}}]),n}(f["d"]);Za=Object(b["a"])([Object(f["a"])({components:{AppButton:ta,Spinner:Ft}})],Za);var ti=Za,ei=ti,ni=(n("d8b0"),Object(L["a"])(ei,Ja,Xa,!1,null,"4cfbd87b",null)),ai=ni.exports,ii=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"invitations"},[n("app-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Create a link containing a one-time token allowing your friend to register an account.",expression:"'Create a link containing a one-time token allowing your friend to register an account.'"}],staticClass:"button",attrs:{text:"Create an invitation link",working:t.working},on:{click:t.createInvitation}}),t.invitationUrl?n("pre",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Click to copy.",expression:"'Click to copy.'"}],staticClass:"token",on:{click:t.copy}},[t._v(t._s(t.invitationUrl))]):t._e()],1)},ri=[],oi=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"working",!1),Object(v["a"])(Object(u["a"])(t),"token",null),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"createInvitation",value:function(){var t=this;this.working=!0,this.apiService.createInvitation().then((function(e){t.token=e.data.token}),(function(e){M.pushError(t,"Generating an invitation failed.",e)})).finally((function(){return t.working=!1}))}},{key:"copy",value:function(){var t=this;navigator.clipboard?navigator.clipboard.writeText(this.invitationUrl).then((function(){M.pushSuccess(t,"The invitation link has been copied.")}),(function(){M.pushError(t,"Copying to clipboard failed.")})):M.pushError(this,"\n                The Clipboard API is not available.\n                Please note that the Clipboard API is only available in secure\n                contexts (websites secured with TLS).\n            ")}},{key:"invitationUrl",get:function(){if(!this.token)return null;var t=window.location;return"".concat(t.protocol,"//").concat(t.host,"/register/").concat(this.token)}}]),n}(f["d"]);oi=Object(b["a"])([Object(f["a"])({components:{AppButton:ta}})],oi);var si=oi,ci=si,ui=(n("487b"),Object(L["a"])(ci,ii,ri,!1,null,"0e3e2fb1",null)),li=ui.exports,di=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"logoutInProgress",!1),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"onUserChanged",value:function(t){null===t&&this.escapeToBrowse()}},{key:"escapeToBrowse",value:function(){this.$router.replace({name:"browse"})}},{key:"goToBrowse",value:function(){this.$router.push({name:"browse"})}},{key:"goToStats",value:function(){this.$router.push({name:"stats"})}},{key:"logout",value:function(){var t=this;this.logoutInProgress=!0,this.apiService.logout().then((function(){t.escapeToBrowse()}),(function(e){M.pushError(t,"There was an error during the sign out process.",e)})).finally((function(){return t.logoutInProgress=!1}))}},{key:"user",get:function(){return this.$store.state.user}}]),n}(f["d"]);Object(b["a"])([Object(f["e"])("user",{immediate:!0})],di.prototype,"onUserChanged",null),di=Object(b["a"])([Object(f["a"])({components:{MainHeader:ze,SubHeader:Ae,FormInput:Gn,AppButton:ta,ActionBar:fa,ActionBarButton:sa,Users:ai,Invitations:li}})],di);var vi=di,bi=vi,fi=(n("1d808"),Object(L["a"])(bi,Ka,Wa,!1,null,"80ddf112",null)),hi=fi.exports,pi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"stats"},[n("action-bar",[n("action-bar-button",{attrs:{text:"Go back to settings",icon:"fas fa-arrow-left"},on:{click:t.goToSettings}})],1),n("main-header",{attrs:{text:"Statistics"}}),t.stats?t._e():n("spinner",{staticClass:"spinner"}),t.stats?n("div",[n("sub-header",{attrs:{text:"Tracks"}}),n("store-stats",{attrs:{stats:t.stats.tracks}}),n("sub-header",{attrs:{text:"Thumbnails"}}),n("store-stats",{attrs:{stats:t.stats.thumbnails}})],1):t._e()],1)},mi=[],yi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"store-stats"},[n("div",[n("div",{staticClass:"label"},[t._v(" Number of items ")]),n("div",{staticClass:"value"},[t._v(" "+t._s(t.stats.allItems)+" ")])]),n("div",[n("div",{staticClass:"label"},[t._v(" Conversion progress ")]),n("div",{staticClass:"value"},[t._v(" "+t._s(t.conversionProgress)+" ")])]),n("div",[n("div",{staticClass:"label"},[t._v(" Original size ")]),n("div",{staticClass:"value"},[t._v(" "+t._s(t.originalSize)+" ")])]),n("div",[n("div",{staticClass:"label"},[t._v(" Converted size ")]),n("div",{staticClass:"value"},[t._v(" "+t._s(t.convertedSize)+" ")])]),n("div",[n("div",{staticClass:"label"},[t._v(" Conversion ratio ")]),n("div",{staticClass:"value"},[t._v(" "+t._s(t.conversionRatio)+" ")])])])},Oi=[],ji=n("cee5"),gi=n.n(ji),ki=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"stats",void 0),t}return Object(c["a"])(n,[{key:"conversionProgress",get:function(){if(0===this.stats.allItems)return"100%";var t=this.stats.convertedItems/this.stats.allItems;return Math.round(100*t)+"%"}},{key:"originalSize",get:function(){return this.humanize(this.stats.originalSize)}},{key:"convertedSize",get:function(){return this.humanize(this.stats.convertedSize)}},{key:"conversionRatio",get:function(){if(0===this.stats.originalSize)return"100%";var t=this.stats.convertedSize/this.stats.originalSize;return Math.round(100*t)+"%"}},{key:"humanize",value:function(t){var e={round:2,base:10};return gi()(t,e)}}]),n}(f["d"]);Object(b["a"])([Object(f["b"])()],ki.prototype,"stats",void 0),ki=Object(b["a"])([f["a"]],ki);var wi=ki,Ci=wi,_i=(n("2885"),Object(L["a"])(Ci,yi,Oi,!1,null,"2349ffd8",null)),xi=_i.exports,Pi=function(t){Object(l["a"])(n,t);var e=Object(d["a"])(n);function n(){var t;Object(s["a"])(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i)),Object(v["a"])(Object(u["a"])(t),"stats",null),Object(v["a"])(Object(u["a"])(t),"timeoutID",void 0),Object(v["a"])(Object(u["a"])(t),"apiService",new E(Object(u["a"])(t))),t}return Object(c["a"])(n,[{key:"mounted",value:function(){this.load()}},{key:"destroyed",value:function(){window.clearTimeout(this.timeoutID)}},{key:"goToSettings",value:function(){this.$router.push({name:"settings"})}},{key:"load",value:function(){var t=this;this.apiService.stats().then((function(e){t.stats=e.data}),(function(e){M.pushError(t,"Could not retrieve the statistics.",e)})).finally((function(){t.timeoutID=window.setTimeout(t.load,1e4)}))}}]),n}(f["d"]);Pi=Object(b["a"])([Object(f["a"])({components:{MainHeader:ze,SubHeader:Ae,ActionBar:fa,ActionBarButton:sa,Spinner:Ft,StoreStats:xi}})],Pi);var $i=Pi,Si=$i,Ti=(n("6626"),Object(L["a"])(Si,pi,mi,!1,null,"413fb986",null)),Ii=Ti.exports;i["a"].use(_e["a"]);var Ei=new _e["a"]({mode:"history",base:"/",routes:[{path:"/browse/*",name:"browse-children",component:Ca},{path:"/browse",name:"browse",component:Ca},{path:"/setup",name:"setup",component:Ea},{path:"/settings",name:"settings",component:hi},{path:"/stats",name:"stats",component:Ii},{path:"/login",name:"login",component:Ra},{path:"/register/:token",name:"register",component:Ya},{path:"*",redirect:"browse"}]}),Di=n("e37d"),Ai=n("8682");i["a"].use(Di["a"]),i["a"].use(Ai["a"],{}),i["a"].config.productionTip=!1,new i["a"]({router:Ei,store:O,render:function(t){return t(Ce)}}).$mount("#app")},cf8f:function(t,e,n){},d25b:function(t,e,n){},d3ee:function(t,e,n){},d8b0:function(t,e,n){"use strict";n("1d00")},d969:function(t,e,n){},d9af:function(t,e,n){"use strict";n("1fa5")},db83:function(t,e,n){"use strict";n("ddf4")},ddf4:function(t,e,n){},e1ad:function(t,e,n){},e7d8:function(t,e,n){},e7df:function(t,e,n){},e951:function(t,e,n){"use strict";n("d969")},e9c6:function(t,e,n){"use strict";n("eab7")},eaaa:function(t,e,n){},eaaaa:function(t,e,n){"use strict";n("fce8")},eab7:function(t,e,n){},ec2d:function(t,e,n){},ee62:function(t,e,n){"use strict";n("7181")},eee0:function(t,e,n){},f475:function(t,e,n){"use strict";n("518d")},f567:function(t,e,n){},f9f1:function(t,e,n){"use strict";n("5dad")},fce8:function(t,e,n){},fd9b:function(t,e,n){"use strict";n("18c9")}});